<style>
  body {
    font-family: sans-serif;
    margin: 1rem;
    background: #f5f5f5;
  }
  #gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px,1fr));
    gap: 16px;
  }
  .tile {
    position: relative;
    overflow: hidden;
    border-radius: 8px;
    background: #fff;
    cursor: pointer;
    transition: transform .2s, box-shadow .2s;
  }
  .tile:hover {
    transform: scale(1.03);
    box-shadow: 0 8px 16px rgba(0,0,0,.2);
  }
  .tile img {
    width: 100%;
    height: 0;
    padding-bottom: 75%;       /* 4:3 aspect ratio */
    object-fit: cover;
    display: block;
  }
  .overlay {
    position: absolute;
    bottom: 0;
    left: 0; right: 0;
    padding: 8px;
    color: #fff;
    background: linear-gradient(transparent, rgba(0,0,0,.7));
    font-size: .9rem;
    opacity: 0;
    transition: opacity .2s;
  }
  .tile:hover .overlay {
    opacity: 1;
  }
</style>

<div id="gallery">Loading…</div>

<script type="module">
  // … your existing Firebase imports & init …

  async function loadGallery() {
    const c = document.getElementById('gallery');
    c.textContent = '';
    const snap = await getDocs(query(
      collection(db,'gallery'),
      orderBy('uploadedAt','desc'),
      limit(1000)
    ));
    if (snap.empty) {
      c.textContent = 'No photos yet.';
      return;
    }
    snap.forEach(doc => {
      const { url, title, dateTaken, location, equipment } = doc.data();
      const tile = document.createElement('div');
      tile.className = 'tile';
      tile.innerHTML = `
        <img src="${url}" alt="${title||'Photo'}">
        <div class="overlay">
          ${title ? `<strong>${title}</strong><br>` : ''}
          ${dateTaken || ''}<br>
          ${location || ''}<br>
          ${equipment || ''}
        </div>
      `;
      c.appendChild(tile);
    });
  }
  loadGallery();
</script>
